-#
-# ish_manager / maps / _form
-#

- url = params[:action] == 'new' ? maps_path : map_path(@map.id)

= form_for @map, :html => { :multipart => true }, url: url do |f|
  - if @map.errors.any?
    #error_explanation
      %h2= "#{pluralize(@map.errors.count, "error")} prohibited this map from being saved:"
      %ul
        - @map.errors.full_messages.each do |message|
          %li= message

  .row
    .col-md-3
      .field
        = f.label :name
        = f.text_field :name
      .field
        = f.label :map_slug, "Map slug (if any)"
        = f.text_field :map_slug
    .col-md-3
      .field
        = f.label :slug
        = f.text_field :slug
      .field
        = f.label :parent_slug
        = f.text_field :parent_slug
    .col-md-2
      &nbsp;
    .col-md-4
      .field
        = f.label :ordering_type
        = select_tag :ordering_type, options_for_select(::Gameui::Map::ORDERING_TYPES)
      .field
        = file_field_tag :image_asset
        = image_tag @map.image_asset.image.url(:thumb) rescue nil

  .field
    = f.label :description
    = f.text_area :description, class: 'tinymce'

  .actions
    = f.submit 'Save'
